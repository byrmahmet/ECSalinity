<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .cm {
  color: #999988;
  font-style: italic;
}
.highlight .cp {
  color: #999999;
  font-weight: bold;
}
.highlight .c1 {
  color: #999988;
  font-style: italic;
}
.highlight .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
.highlight .c, .highlight .cd {
  color: #999988;
  font-style: italic;
}
.highlight .err {
  color: #a61717;
  background-color: #e3d2d2;
}
.highlight .gd {
  color: #000000;
  background-color: #ffdddd;
}
.highlight .ge {
  color: #000000;
  font-style: italic;
}
.highlight .gr {
  color: #aa0000;
}
.highlight .gh {
  color: #999999;
}
.highlight .gi {
  color: #000000;
  background-color: #ddffdd;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .gt {
  color: #aa0000;
}
.highlight .kc {
  color: #000000;
  font-weight: bold;
}
.highlight .kd {
  color: #000000;
  font-weight: bold;
}
.highlight .kn {
  color: #000000;
  font-weight: bold;
}
.highlight .kp {
  color: #000000;
  font-weight: bold;
}
.highlight .kr {
  color: #000000;
  font-weight: bold;
}
.highlight .kt {
  color: #445588;
  font-weight: bold;
}
.highlight .k, .highlight .kv {
  color: #000000;
  font-weight: bold;
}
.highlight .mf {
  color: #009999;
}
.highlight .mh {
  color: #009999;
}
.highlight .il {
  color: #009999;
}
.highlight .mi {
  color: #009999;
}
.highlight .mo {
  color: #009999;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #009999;
}
.highlight .sb {
  color: #d14;
}
.highlight .sc {
  color: #d14;
}
.highlight .sd {
  color: #d14;
}
.highlight .s2 {
  color: #d14;
}
.highlight .se {
  color: #d14;
}
.highlight .sh {
  color: #d14;
}
.highlight .si {
  color: #d14;
}
.highlight .sx {
  color: #d14;
}
.highlight .sr {
  color: #009926;
}
.highlight .s1 {
  color: #d14;
}
.highlight .ss {
  color: #990073;
}
.highlight .s {
  color: #d14;
}
.highlight .na {
  color: #008080;
}
.highlight .bp {
  color: #999999;
}
.highlight .nb {
  color: #0086B3;
}
.highlight .nc {
  color: #445588;
  font-weight: bold;
}
.highlight .no {
  color: #008080;
}
.highlight .nd {
  color: #3c5d5d;
  font-weight: bold;
}
.highlight .ni {
  color: #800080;
}
.highlight .ne {
  color: #990000;
  font-weight: bold;
}
.highlight .nf {
  color: #990000;
  font-weight: bold;
}
.highlight .nl {
  color: #990000;
  font-weight: bold;
}
.highlight .nn {
  color: #555555;
}
.highlight .nt {
  color: #000080;
}
.highlight .vc {
  color: #008080;
}
.highlight .vg {
  color: #008080;
}
.highlight .vi {
  color: #008080;
}
.highlight .nv {
  color: #008080;
}
.highlight .ow {
  color: #000000;
  font-weight: bold;
}
.highlight .o {
  color: #000000;
  font-weight: bold;
}
.highlight .w {
  color: #bbbbbb;
}
.highlight {
  background-color: #f8f8f8;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index--copy-" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Measure Electrical Conductivity in Siemens, Total Dissolved Solids in PPM, Salinity in PSU and PPT.</p>

<p>Monitor hydroponic nutrient levels, salinity levels in aquariums or the ocean, saltwater pools, soil salinity, water quality etc.</p>

<p>It uses the standard Arduino Wire library to interface with the device.
It&rsquo;s operating principle is based on sending a very short-duration DC pulse
from one probe pin and measuring the conductivity on the other pin. The conductivity
is then converted to a temperature compensated Siemen. Salinity is also derived
from the measure and is in PSU, PPT, and PPM.</p>

<h2 id="characteristics">Characteristics</h2>

<ul>
<li><strong>EC range</strong>: ~1.0 - ~200mS</li>
<li><strong>Salinity range</strong>: 2 - 42</li>
<li><strong>Temperature range</strong>: -2 - 35C</li>
<li><strong>Interface</strong>: I2C</li>
<li><strong>Current use</strong>: ~10mA peak, low idle current ~1mA</li>
<li><strong>Voltage range</strong>: 2.7 - 5.5V</li>
</ul>

<h1 id="connections">Connections</h1>

<h2 id="i2c-connections">I2C Connections</h2>

<p>Making the connections to the device is as follows:</p>

<table><thead>
<tr>
<th style="text-align: center">EC Salinity Probe</th>
<th style="text-align: center">Master device</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">GND</td>
<td style="text-align: center">GND</td>
</tr>
<tr>
<td style="text-align: center">SCL</td>
<td style="text-align: center">SCL</td>
</tr>
<tr>
<td style="text-align: center">SDA</td>
<td style="text-align: center">SDA</td>
</tr>
<tr>
<td style="text-align: center">VCC</td>
<td style="text-align: center">2.7 - 5V</td>
</tr>
</tbody></table>

<h2 id="temperature-probe-connections">Temperature Probe Connections</h2>

<p>The temperature probe should be connected as follows:</p>

<table><thead>
<tr>
<th style="text-align: center">EC Salinity Probe</th>
<th style="text-align: center">Temperature Probe</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">+</td>
<td style="text-align: center">VCC</td>
</tr>
<tr>
<td style="text-align: center">D</td>
<td style="text-align: center">Data</td>
</tr>
<tr>
<td style="text-align: center">-</td>
<td style="text-align: center">GND</td>
</tr>
</tbody></table>

<h2 id="ec-probe-connections">EC Probe Connections</h2>

<p>The EC probe has two pins and can be connected either way.</p>

<h3 id="probe-selection">Probe Selection</h3>

<p>Any 2-electrode probe can be attached to the device.</p>

<h1 id="calibration">Calibration</h1>
<pre class="highlight cpp"><code><span class="cp">#include &lt;ECSalinity.h&gt;
</span><span class="n">EC_Salinity</span> <span class="n">ec</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">calibrationSolution_mS</span> <span class="o">=</span> <span class="mf">2.77</span><span class="p">;</span>

<span class="n">ec</span><span class="p">.</span><span class="n">setK</span><span class="p">(</span><span class="mf">10.0</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbe</span><span class="p">(</span><span class="n">calibrationSolution_mS</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefEC</span><span class="p">);</span>
</code></pre>
<p>When the device is powered for the first time, it will be uncalibrated. There are two calibration options: single and dual or double point. Single point determines a percent difference between actual readings and expected readings, then uses it to adjust the readings. Double point uses two points, a high and low, to determine the adjustment to make. The choice of single or double depends on the expected use. A small range might be better measured by single point calibration whereas a large range may be more accurate with double point.  </p>

<p>Before any measurements can be made, to include measurements to calibrate the probe, the cell constant (K) must be specified. This number is typically 0.1, 1.0, or 10.0. The exact value may be found on the probe itself (9.988 for example). After K has been set, you can expect to see values being returned. It will not be accurate and must be calibrated.</p>

<p>To begin the single point calibration process, place the thermometer and probe in a calibration solution then call the <code class="prettyprint">calibrateProbe</code> function.</p>

<p>For best results, the probe should be cleaned with distilled water and then placed in the solution for 5-10 minutes before the probe is used. It shouldn&rsquo;t be placed on the bottom or side of the solution container. Note that any turbidity, air bubbles, large particles, etc will effect readings. An unstable temperature will decrease accuracy as well.</p>

<p>When calibrating the probe, it is important to consider the expected temperature range. EC measurements are very temperature dependent, effecting the results by approximately 2% per degree C. The probe should be calibrated at the median expected temperature.</p>

<p>Likewise, the probe should be calibrated in the median expected EC range. For example, if you are planning to measure the salinity of an aquarium, you might expect readings Â±5 from 35PPT (equivalent to 53mS). So a 53mS solution for calibration would be appropriate, whereas a hydroponic calibration might be 2.77mS or lower.</p>

<p>Another consideration is the placement of the probe. When the probe sends out a pulse of electricity, it leaves the probe in 360 degrees. If it is near a metal surface, you will experience fringing effects. The probe should be calibrated in an environment as similar as possible to the location it will be deployed in.</p>

<h3 id="single-point">Single Point</h3>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">solutionEC</span> <span class="o">=</span> <span class="mf">53.0</span><span class="p">;</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrationProbe</span><span class="p">(</span><span class="n">solutionEC</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>
</code></pre>
<p>After K has been set, you can calibrate the probe using a single point. For this method of calibrating, submerge the probe and wait for the readings to stabilize. Then call <code class="prettyprint">calibrateProbe</code>. The calibration information will be stored in ec.referenceLow and is the percent difference from the measured value and the expected value.</p>

<h3 id="dual-point">Dual Point</h3>

<p>You can use dual point calibration for more accurate results between two predesignated points. Two calibration solutions are required, the low and high values you expect to measure between.</p>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">readingLow</span> <span class="o">=</span> <span class="mf">51.0</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">readingHigh</span> <span class="o">=</span> <span class="mf">60.2</span><span class="p">;</span>
<span class="n">ec</span><span class="p">.</span><span class="n">setDualPointCalibration</span><span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">58.0</span><span class="p">,</span> <span class="n">readingLow</span><span class="p">,</span> <span class="n">readingHigh</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">useDualPoint</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</code></pre>
<ol>
<li>Determine the lowest and highest measurement you expect in mS. For example, to
measure salinity in an aquarium, the lowest level you would expect to measaure might
be 30 PPT and the highest might be 38 PPT. These points are referred to as
<code class="prettyprint">referenceLow</code> and <code class="prettyprint">referenceHigh</code></li>
<li>Using the calibrated probe and a calibration solution at <code class="prettyprint">referenceLow</code>, call
<code class="prettyprint">measureEC</code> and see what the actual reading is. Do the same for
referenceHigh. These readings are referred to as <code class="prettyprint">readingLow</code> and <code class="prettyprint">readingHigh</code>.
As an example, the <code class="prettyprint">readingLow</code> might be 27 and <code class="prettyprint">readingHigh</code> might be 40.<br></li>
<li>Call <code class="prettyprint">setDualPointCalibration</code> to save the values to the device, then enable
dual point calibration. By default, the device does not use dual point. A call
to <code class="prettyprint">useDualPoint</code> must be made to enable it each time the device is
powered.</li>
</ol>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">solutionECLow</span> <span class="o">=</span> <span class="mf">53.0</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">solutionECHigh</span> <span class="o">=</span> <span class="mf">58.0</span><span class="p">;</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbeLow</span><span class="p">(</span><span class="n">solutionECLow</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbeHigh</span><span class="p">(</span><span class="n">solutionECHigh</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">calibrateProbeLow</code> and <code class="prettyprint">calibrateProbeHigh</code> can be used
to programatically determine the values.</p>

<p><code class="prettyprint">getCalibrateHigh</code> and <code class="prettyprint">getCalibrateLow</code> can be used
to get the currently set reference values.</p>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">useDualPoint</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
</code></pre>
<p>Each call to <code class="prettyprint">measureEC</code> will use the calibration to adjust
the reading. It can be disabled by <code class="prettyprint">ec.useDualPoint(false);</code></p>

<h1 id="use">Use</h1>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">tempC</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">measureTemp</span><span class="p">();</span>
</code></pre>
<p>Once the probe has been calibrated, a reading can be taken. The device will use
the most recent temperature measurement obtained from <code class="prettyprint">measureTemp</code>.
The probe should be placed in the solution to be measured and <code class="prettyprint">measureEC</code>
called to start a measurement. For best results, the probe should be cleaned with distilled
water and left in the solution for 5 - 10 minutes. Be sure no air bubbles or debris
are on the probe points.</p>

<p>After the measurement is taken, the following class variables are updated:</p>

<ul>
<li><code class="prettyprint">uS</code></li>
<li><code class="prettyprint">mS</code></li>
<li><code class="prettyprint">S</code></li>
<li><code class="prettyprint">PPM_500</code></li>
<li><code class="prettyprint">PPM_640</code></li>
<li><code class="prettyprint">PPM_700</code></li>
<li><code class="prettyprint">salinityPSU</code></li>
<li><code class="prettyprint">salinityPPT</code></li>
<li><code class="prettyprint">salinityPPM</code></li>
<li><code class="prettyprint">tempC</code></li>
<li><code class="prettyprint">tempF</code></li>
</ul>

<h2 id="temperature-coefficients">Temperature Coefficients</h2>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">pureWaterCompensation</span> <span class="o">=</span> <span class="mf">0.0455</span><span class="p">;</span>
<span class="n">ec</span><span class="p">.</span><span class="n">measureEC</span><span class="p">(</span><span class="n">pureWaterCompensation</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">measureEC</span><span class="p">();</span>
<span class="n">ec</span><span class="p">.</span><span class="n">measureSalinity</span><span class="p">();</span>
</code></pre>
<p>If the solution to be measured is saltwater, use <code class="prettyprint">measureSalinity()</code>,
if it is freshwater, use <code class="prettyprint">measureEC()</code>. A custom temperature
coefficient can be used by passing it to <code class="prettyprint">measureEC()</code>.</p>

<h2 id="temperature-compensation">Temperature Compensation</h2>
<pre class="highlight cpp"><code><span class="n">byte</span> <span class="n">tempConstant</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
<span class="n">ec</span><span class="p">.</span><span class="n">setTempConstant</span><span class="p">(</span><span class="n">tempConstant</span><span class="p">);</span>

<span class="n">ec</span><span class="p">.</span><span class="n">setTempConstant</span><span class="p">(</span><span class="mh">0xFF</span><span class="p">);</span>
</code></pre>
<p>To set the temperature used for compensation, call
<code class="prettyprint">setTempConstant()</code> and pass the temperature to use. To use the
actual temperature, pass 0xFF.</p>

<h2 id="accuracy">Accuracy</h2>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">setAccuracy</span><span class="p">(</span><span class="mi">21</span><span class="p">);</span>
</code></pre>
<p>The accuracy of the device can be adjusted by modifying <code class="prettyprint">setAccuracy</code>.
By default, 9 measurements are taken. A running median sort is applied and
the middle third of the nine measurements are averaged together to provide the
final result. Any number of measurements can be taken as long as it is evenly
divisible by 3. The least number of measures possible is 3.</p>

<h2 id="measurement-time">Measurement Time</h2>

<p>Each individual EC measurement takes 10ms. If the default accuracy is set to 9,
a call to <code class="prettyprint">measureEC</code> will return in about 90ms. A temperature measurement
takes 750ms.</p>

<h1 id="member-data">Member Data</h1>

<h2 id="us">uS</h2>

<p><code class="prettyprint">float</code><br/>
EC in micro-Siemens</p>

<h2 id="ms">mS</h2>

<p><code class="prettyprint">float</code><br/>
EC in milli-Siemens</p>

<h2 id="s">S</h2>

<p><code class="prettyprint">float</code><br/>
EC in Siemens</p>

<h2 id="ppm_500">PPM_500</h2>

<p><code class="prettyprint">long</code><br/>
TDS in PPM using 500 as a multiplier (US)</p>

<h2 id="ppm_640">PPM_640</h2>

<p><code class="prettyprint">long</code><br/>
TDS in PPM using 640 as a multiplier</p>

<h2 id="ppm_700">PPM_700</h2>

<p><code class="prettyprint">long</code><br/>
TDS in PPM using 700 as a multiplier (US)</p>

<h2 id="salinitypsu">salinityPSU</h2>

<p><code class="prettyprint">float</code><br/>
Salinity in Practical Salinity Units</p>

<h2 id="salinityppt">salinityPPT</h2>

<p><code class="prettyprint">float</code><br/>
Salinity in parts-per-thousand</p>

<h2 id="salinityppm">salinityPPM</h2>

<p><code class="prettyprint">float</code><br/>
Salinity in parts-per-million</p>

<h2 id="tempc">tempC</h2>

<p><code class="prettyprint">float</code><br/>
Temperature in Celsius</p>

<h2 id="tempf">tempF</h2>

<p><code class="prettyprint">float</code><br/>
Temperature in Fahrenheit</p>

<h2 id="tempcoefec">tempCoefEC</h2>

<p><code class="prettyprint">const float = 0.019</code><br/>
Temperature compensation coefficient for EC/freshwater measurements</p>

<h2 id="tempcoefsalinity">tempCoefSalinity</h2>

<p><code class="prettyprint">const float = 0.021</code><br/>
Temperature compensation coefficient for salinity measurements</p>

<h1 id="member-functions">Member Functions</h1>

<h2 id="calibrateprobe">calibrateProbe</h2>
<pre class="highlight cpp"><code><span class="cp">#include &lt;ECSalinity.h&gt;
</span><span class="n">EC_Salinity</span> <span class="n">ec</span><span class="p">;</span>

<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbe</span><span class="p">(</span><span class="mf">2.77</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefEC</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbe</span><span class="p">(</span><span class="mf">53.0</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbe</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0455</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void calibrateProbe(float solutionEC, float tempCoef)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>solutionEC</td>
<td>mS of calibration solution</td>
</tr>
<tr>
<td>tempCoef</td>
<td>temperature coefficient to use for measurement</td>
</tr>
</tbody></table>

<p>Calibrates the connected probe and saves the result in EEPROM.</p>

<aside class="notice">
The following values are predefined, but any value can be passed.<br/>
<code>tempCoefSalinity</code><br/>
<code>tempCoefEC</code><br/>
</aside>

<h2 id="calibrateprobehigh">calibrateProbeHigh</h2>
<pre class="highlight cpp"><code><span class="cp">#include &lt;ECSalinity.h&gt;
</span><span class="n">EC_Salinity</span> <span class="n">ec</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"mS: "</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">ec</span><span class="p">.</span><span class="n">measureEC</span><span class="p">(</span><span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">));</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>

<span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Calibrating high..."</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbeHigh</span><span class="p">(</span><span class="mi">58</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void calibrateProbeHigh(float solutionEC, float tempCoef)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>solutionEC</td>
<td>mS of calibration solution</td>
</tr>
<tr>
<td>tempCoef</td>
<td>temperature coefficient to use for measurement</td>
</tr>
</tbody></table>

<p>Calibrates dual-point values for the high reading and saves them in the devices&rsquo;s EEPROM.</p>

<aside class="notice">
The following values are predefined, but any value can be passed.
tempCoefSalinity<br/>
tempCoefEC<br/>
</aside>

<h2 id="calibrateprobelow">calibrateProbeLow</h2>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbeLow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefEC</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbeLow</span><span class="p">(</span><span class="mf">53.0</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbeLow</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0455</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void calibrateProbeLow(float solutionEC, float tempCoef)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>solutionEC</td>
<td>mS of calibration solution</td>
</tr>
<tr>
<td>tempCoef</td>
<td>temperature coefficient to use for measurement</td>
</tr>
</tbody></table>

<p>Calibrates dual-point values for the low reading and saves them in the devices&rsquo;s EEPROM.</p>

<aside class="notice">
The following values are predefined, but any value can be passed.
tempCoefSalinity<br/>
tempCoefEC<br/>
</aside>

<h2 id="getaccuracy">getAccuracy</h2>
<pre class="highlight cpp"><code><span class="n">byte</span> <span class="n">accuracy</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">getAccuracy</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">byte getAccuracy()</code><br/></p>

<p>Retrieves the accuracy configuration of the device.</p>

<p><strong>Returns</strong>: <code class="prettyprint">byte</code> accuracy</p>

<h2 id="getcalibratehigh">getCalibrateHigh</h2>
<pre class="highlight cpp"><code><span class="cp">#include &lt;ECSalinity.h&gt;
</span><span class="n">EC_Salinity</span> <span class="n">ec</span><span class="p">;</span>

<span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Calibrating high..."</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbeHigh</span><span class="p">(</span><span class="mi">58</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>

<span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Reference high set at: "</span><span class="p">);</span>
<span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">ec</span><span class="p">.</span><span class="n">getCalibrateHigh</span><span class="p">());</span>
</code></pre>
<p><code class="prettyprint">float getCalibrateHigh()</code><br/></p>

<p>Retrieves the dual-point calibration high reference value.</p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> highCalibration</p>

<h2 id="getcalibratelow">getCalibrateLow</h2>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">lowCalibration</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">getCalibrateLow</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">float getCalibrateLow()</code><br/></p>

<p>Retrieves the dual-point calibration low reference value.</p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> lowCalibration</p>

<h2 id="getcalibratelowreading">getCalibrateLowReading</h2>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">lowCalibration</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">getCalibrateLowReading</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">float getCalibrateLowReading()</code><br/></p>

<p>Retrieves the dual-point calibration low reading value.</p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> lowCalibration</p>

<h2 id="getcalibratehigh">getCalibrateHigh</h2>
<pre class="highlight cpp"><code><span class="cp">#include &lt;ECSalinity.h&gt;
</span><span class="n">EC_Salinity</span> <span class="n">ec</span><span class="p">;</span>

<span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Calibrating high..."</span><span class="p">);</span>
<span class="n">ec</span><span class="p">.</span><span class="n">calibrateProbeHigh</span><span class="p">(</span><span class="mi">58</span><span class="p">,</span> <span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>

<span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Reference high set at: "</span><span class="p">);</span>
<span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">ec</span><span class="p">.</span><span class="n">getCalibrateHigh</span><span class="p">());</span>
</code></pre>
<p><code class="prettyprint">float getCalibrateHigh()</code><br/></p>

<p>Retrieves the dual-point calibration high reference value.</p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> highCalibration</p>

<h2 id="getcalibratehighreading">getCalibrateHighReading</h2>

<p><code class="prettyprint">float getCalibrateHighReading()</code><br/></p>

<p>Retrieves the dual-point calibration high reading value.</p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> highCalibration</p>

<h2 id="getcalibrateoffset">getCalibrateOffset</h2>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">offsetCalibration</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">getCalibrateOffset</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">float getCalibrateOffset()</code><br/></p>

<p>Retrieves the single-point calibration offset value.</p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> offsetCalibration</p>

<h2 id="getk">getK</h2>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">K</span> <span class="o">=</span> <span class="n">getK</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">float getK()</code><br/></p>

<p>Retrieves the cell constant from the device.</p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> K</p>

<h2 id="gettempconstant">getTempConstant</h2>
<pre class="highlight cpp"><code><span class="n">byte</span> <span class="n">tempConstant</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">getTempConstant</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">byte getTempConstant()</code><br/></p>

<p>Retrieves the temperature constant used for temperature compensation. A value
of <code class="prettyprint">0xFF</code> indicates the actual measured temperature is being used.</p>

<p><strong>Returns</strong>: <code class="prettyprint">byte</code> tempConstant</p>

<h2 id="getversion">getVersion</h2>
<pre class="highlight cpp"><code><span class="n">byte</span> <span class="n">version</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">getVersion</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="n">version</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</code></pre>
<p><code class="prettyprint">byte getVersion()</code><br/></p>

<p>Retrieves the version of the hardware/firmware.</p>

<p><strong>Returns</strong>: <code class="prettyprint">byte</code> version</p>

<h2 id="measureec">measureEC()</h2>
<pre class="highlight cpp"><code><span class="cp">#include &lt;ECSalinity.h&gt;
</span><span class="n">EC_Salinity</span> <span class="n">ec</span><span class="p">;</span>

<span class="kt">float</span> <span class="n">EC</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">measureEC</span><span class="p">(</span><span class="n">ec</span><span class="p">.</span><span class="n">tempCoefEC</span><span class="p">);</span>
<span class="kt">float</span> <span class="n">EC</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">measureEC</span><span class="p">(</span><span class="n">ec</span><span class="p">.</span><span class="n">tempCoefSalinity</span><span class="p">);</span>
<span class="kt">float</span> <span class="n">EC</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">measureEC</span><span class="p">(</span><span class="mf">0.0455</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">float measureEC(float tempCoef)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tempCoef</td>
<td>temperature coefficient to use for measurement</td>
</tr>
</tbody></table>

<p>Starts an EC measurement.</p>

<p>Updates the following:<br/>
- <code class="prettyprint">uS</code><br/>
- <code class="prettyprint">mS</code><br/>
- <code class="prettyprint">S</code><br/>
- <code class="prettyprint">PPM_500</code><br/>
- <code class="prettyprint">PPM_640</code><br/>
- <code class="prettyprint">PPM_700</code><br/>
- <code class="prettyprint">salinityPSU</code><br/>
- <code class="prettyprint">salinityPPT</code><br/>
- <code class="prettyprint">salinityPPM</code><br/>
- <code class="prettyprint">tempC</code><br/>
- <code class="prettyprint">tempF</code><br/></p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> EC in mS</p>

<aside class="notice">
There are two convenience functions to use:<br/>
<code>measureEC()</code> without a temperature coefficient will use tempCoefEC<br/>
<code>measureSalinity()</code> will use tempCoefSalinity
</aside>

<aside class="warning">
If measuring salinity, use <code>salinityPPT</code> or <code>salinityPPM</code>
rather than <code>PPM_500</code>, <code>PPM_640</code>, or <code>PPM_700</code>.
</aside>

<h2 id="measuresalinity">measureSalinity()</h2>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">PSU</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">measureSalinity</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">float measureSalinity()</code><br/></p>

<p>Starts an EC salinity measurement using tempCoefSalinity as a temperature coefficient.</p>

<p>Updates the following:<br/>
- <code class="prettyprint">uS</code><br/>
- <code class="prettyprint">mS</code><br/>
- <code class="prettyprint">S</code><br/>
- <code class="prettyprint">PPM_500</code><br/>
- <code class="prettyprint">PPM_640</code><br/>
- <code class="prettyprint">PPM_700</code><br/>
- <code class="prettyprint">salinityPSU</code><br/>
- <code class="prettyprint">salinityPPT</code><br/>
- <code class="prettyprint">salinityPPM</code><br/>
- <code class="prettyprint">tempC</code><br/>
- <code class="prettyprint">tempF</code><br/></p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> salinity in PSU</p>

<aside class="notice">
Salinity can only be measured between 2 - 42 PSU. -1 is returned if it is out of bounds.
</aside>

<h2 id="measuretemp">measureTemp()</h2>
<pre class="highlight cpp"><code><span class="kt">float</span> <span class="n">tempC</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">measureTemp</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">float setAccuracy(byte accuracy)</code><br/></p>

<p>Starts a temperature measurement.</p>

<p>Updates the following:<br/>
- <code class="prettyprint">tempC</code><br/>
- <code class="prettyprint">tempF</code><br/></p>

<p><strong>Returns</strong>: <code class="prettyprint">float</code> temperature in Celsius</p>

<aside class="notice">
If the device is unconnected, -127 is returned.
</aside>

<h2 id="reset">reset()</h2>

<p><code class="prettyprint">void reset()</code><br/></p>

<p>Clears all calibration data from the device.</p>

<h2 id="setaccuracy">setAccuracy</h2>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">setAccuracy</span><span class="p">(</span><span class="mi">21</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void setAccuracy(byte accuracy)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>accuracy</td>
<td>accuracy setting</td>
</tr>
</tbody></table>

<p>Changes the number of samples taken per measurement. The device uses a running median average that averages the middle third of the total values.</p>

<aside class="warning">
The accuracy value must be evenly divisible by 3.
</aside>

<h2 id="setdualpointcalibration">setDualPointCalibration</h2>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">setDualPointCalibration</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void setDualPointCalibration(float refLow, float refHigh, float readLow, float readHigh)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>refLow</td>
<td>reference low calibration solution in mS</td>
</tr>
<tr>
<td>refHigh</td>
<td>reference high calibration solution in mS</td>
</tr>
<tr>
<td>readLow</td>
<td>reading low calibration solution in mS</td>
</tr>
<tr>
<td>readHigh</td>
<td>reading low calibration solution in mS</td>
</tr>
</tbody></table>

<p>Sets all the values for dual point calibration and saves them in the devices&rsquo;s EEPROM.</p>

<h2 id="setk">setK</h2>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">setK</span><span class="p">(</span><span class="mf">1.5</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void setK(float K)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>K</td>
<td>the new cell constant</td>
</tr>
</tbody></table>

<p>Updates the device with a new cell constant and saves it in EEPROM.</p>

<h2 id="settempconstant">setTempConstant</h2>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">setTempConstant</span><span class="p">(</span><span class="mi">25</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void setTempConstant(byte tempConstant)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tempConstant</td>
<td>the new cell constant</td>
</tr>
</tbody></table>

<p>Configures the device to use the provided temperature constant.</p>

<p>By default, the temperature constant is set to <code class="prettyprint">0xFF</code> which means the actual temperature is to be used.</p>

<aside class="notice">
This value is not saved and must be reconfigured on each reset.
</aside>

<h2 id="usedualpoint">useDualPoint</h2>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">useDualPoint</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void useDualPoint(bool useDualPoint)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>useDualPoint</td>
<td>true/false</td>
</tr>
</tbody></table>

<p>Configures the device to use dual point calibration. By default, the device powers on with this value set to <code class="prettyprint">false</code>.</p>

<aside class="notice">
This value is not saved and must be reconfigured on each reset.
</aside>

<aside class="warning">
Ensure dual point calibration values are entered prior to passing <code>true</code>.
</aside>

<h2 id="usetemperaturecompensation">useTemperatureCompensation</h2>
<pre class="highlight cpp"><code><span class="n">ec</span><span class="p">.</span><span class="n">useTemperatureCompensation</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</code></pre>
<p><code class="prettyprint">void useTemperatureCompensation(bool useTempComp)</code><br/></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>useTempComp</td>
<td>true/false</td>
</tr>
</tbody></table>

<p>Configures device to use temperature compensation. If this is set to <code class="prettyprint">false</code>, the uncompensated Siemen value will be returned by the device.</p>

<aside class="notice">
This value is not saved and must be reconfigured on each reset.
</aside>

<h2 id="usingdualpoint">usingDualPoint</h2>
<pre class="highlight cpp"><code><span class="kt">bool</span> <span class="n">bDualPoint</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">usingDualPoint</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">bool usingDualPoint()</code><br/></p>

<p>Determines if dual point calibration is being used.</p>

<p><strong>Returns</strong>: <code class="prettyprint">bool</code> true/false</p>

<h2 id="usingtemperaturecompensation">usingTemperatureCompensation</h2>
<pre class="highlight cpp"><code><span class="kt">bool</span> <span class="n">bTempComp</span> <span class="o">=</span> <span class="n">ec</span><span class="p">.</span><span class="n">usingTemperatureCompensation</span><span class="p">();</span>
</code></pre>
<p><code class="prettyprint">bool usingTemperatureCompensation()</code><br/></p>

<p>Determines if temperature compensation is being used.</p>

<p><strong>Returns</strong>: <code class="prettyprint">bool</code> true/false</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
